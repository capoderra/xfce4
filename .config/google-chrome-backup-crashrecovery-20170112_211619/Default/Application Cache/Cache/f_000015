function Yic(a,b){a.L=b}function Zic(a,b){a.J=b}function EW(a,b){return new Ho(b,function(b){a.C[b.getId()]=b;null!=b.getProperty("docs-impression-code")&&a.eM&&a.eM.Vi(b);a.dispatchEvent(new TBb(b))},a.F)}function $ic(a){var b=new ritz.charts.Chart;b.updateFromJsonString(a.L);return b};var ajc={f_b:"waffle-charteditor-aggregate",n$b:"waffle-charteditor-hasheaders",o$b:"waffle-charteditor-haslabels",t$b:"waffle-charteditor-hidden-data",Fhc:"waffle-charteditor-merge-scheme",Plc:"waffle-chareditor-range-change",P0a:"waffle-charteditor-transpose",Crc:"waffle-charteditor-use-classic"};function bjc(){return V('<div class="docs-charteditor-collapsible-header-container"></div><div class="docs-charteditor-collapsible-content"></div>')}function cjc(){return V('<div class="docs-charteditor-collapsible-header"><div class="docs-charteditor-collapsible-title goog-inline-block"></div><div class="docs-charteditor-collapsible-summary goog-inline-block"></div><div class="docs-charteditor-collapsible-icon"></div></div>')};function FW(a,b){kr.call(this,a,void 0,b);this.Dg(64,!0)}z(FW,kr);FW.prototype.va=function(){this.Da=Or(cjc)};FW.prototype.Ja=function(){FW.$.Ja.call(this);var a=this.getContent(),b=this.bb("docs-charteditor-collapsible-title");this.qa().Xf(b,a)};FW.prototype.Ze=function(a){FW.$.Ze.call(this,a);this.dispatchEvent(a?"charteditor-collapsiblesectionheader-opened":"charteditor-collapsiblesectionheader-closed")};
FW.prototype.Tqa=function(a){var b=this.bb("docs-charteditor-collapsible-summary");this.qa().Xf(b,a)};function GW(a,b,c,d,e){S.call(this,e);this.D=b;this.Oa(this.D);this.F=c;this.J=d;this.C=new FW(a,this.qa());this.Oa(this.C)}z(GW,S);GW.prototype.va=function(){this.Da=Or(bjc)};
GW.prototype.Ja=function(){GW.$.Ja.call(this);var a=this.bb("docs-charteditor-collapsible-header-container");this.C.render(a);iv(this.J,this.C,this.F);a=this.bb("docs-charteditor-collapsible-content");this.D.render(a);this.getHandler().V(this.C,["charteditor-collapsiblesectionheader-closed","charteditor-collapsiblesectionheader-opened"],this.L);djc(this,!1)};GW.prototype.Tqa=function(a){this.C.Tqa(a)};GW.prototype.L=function(a){djc(this,"charteditor-collapsiblesectionheader-opened"==a.type)};
function djc(a,b){a=a.bb("docs-charteditor-collapsible-content");R(a,b)};function ejc(){return V('<div class="docs-charteditor-labeledcheckbox"><div class="docs-charteditor-labeledcheckbox-checkbox"></div><div class="docs-charteditor-labeledcheckbox-label"></div></div>')};function HW(a,b,c){S.call(this,c);this.D=a;this.F=b;this.C=new ps;this.Oa(this.C)}z(HW,S);HW.prototype.va=function(){this.Da=Or(ejc)};HW.prototype.Ja=function(){HW.$.Ja.call(this);var a=this.bb("docs-charteditor-labeledcheckbox-checkbox");this.C.render(a);Sr(this.C,this.bb("docs-charteditor-labeledcheckbox-label"));iv(this.F,this.C,this.D)};function IW(a,b){a.qa().Xf(a.bb("docs-charteditor-labeledcheckbox-label"),b)}HW.prototype.setVisible=function(a){R(this.Da,a)};HW.prototype.Wc=function(a){this.C.Wc(a)};function fjc(a){return V(""+('<div class="docs-charteditor"><div class="docs-charteditor-toggle-tabs"></div><div class="docs-charteditor-basic-tab"><div class="docs-charteditor-toplevel-controls"><div class="docs-charteditor-control-holder"><div class="docs-charteditor-control-label">Chart title</div><input type="text" class="docs-charteditor-chart-title-input jfk-textinput" /></div><div class="docs-charteditor-control-holder goog-inline-block"><div class="docs-charteditor-control-label">Chart type</div><div class="docs-charteditor-chart-type-select"></div></div></div>'+
(a.NPb?'<div class="docs-charteditor-data-picker"></div>':"")+'<div class="waffle-charteditor-is3D-checkbox"></div></div><div class="docs-charteditor-customize-tab"></div></div>'))};function gjc(a){switch(a){case ritz.charts.ChartType.AREA:return"Area Chart";case ritz.charts.ChartType.BAR:return"Bar Chart";case ritz.charts.ChartType.BUBBLE:return"Bubble Chart";case ritz.charts.ChartType.CANDLESTICK:return"Candlestick Chart";case ritz.charts.ChartType.COLUMN:return"Column Chart";case ritz.charts.ChartType.HISTOGRAM:return"Histogram";case ritz.charts.ChartType.LINE:return"Line Chart";case ritz.charts.ChartType.PIE:return"Pie Chart"}};function JW(a,b){S.call(this,b);this.R=a;this.J=new mU("Basic","Customize",!0,b);this.Oa(this.J);this.O=new Ir;this.Oa(this.O);this.Z=new MH(700);H(this,this.Z);this.C=new OH(void 0,void 0,this.qa());this.Oa(this.C);this.F=new dv(void 0,void 0,!0);H(this,this.F);this.D=null;this.L=new HW(a.Kj("charteditor-is3d-change"),this.F,this.qa());this.Oa(this.L)}z(JW,S);JW.prototype.va=function(){this.Da=Or(fjc,{NPb:!!this.D})};
JW.prototype.Ja=function(){JW.$.Ja.call(this);Zic(this.J,this.bb("docs-charteditor-basic-tab"));Yic(this.J,this.bb("docs-charteditor-customize-tab"));this.J.render(this.bb("docs-charteditor-toggle-tabs"));var a=this.bb("docs-charteditor-chart-title-input");this.O.Ya(a);this.Z.Ya(a);this.D&&(a=this.bb("docs-charteditor-data-picker"),this.D.render(a));for(var b in ritz.charts.ChartType)a=ritz.charts.ChartType[b],a!=ritz.charts.ChartType.UNDEFINED&&this.C.Gf(new vr(gjc(a),a,this.qa()));b=this.bb("docs-charteditor-chart-type-select");
this.C.Ya(b);iv(this.F,this.C,this.R.Kj("charteditor-chart-type-change"),O$b,y(function(){return this.C.Ma()},this));this.getHandler().V(this.Z,"change",this.ea);this.L.render(this.bb("waffle-charteditor-is3D-checkbox"));IW(this.L,"3D")};function hjc(a,b){a.O.Xa(b.getTitle());a.C.Xa(b.getType());a.L.Wc(b.is3D())}JW.prototype.ea=function(){this.R.Kj("charteditor-chart-title-field-change").Lb(this.O.Ma())};function ijc(){var a;a=""+('<div class="waffle-charteditor-rangepicker"><div class="waffle-charteditor-rangepicker-input"></div><div class="waffle-charteditor-rangepicker-merge">'+U("Combine ranges:")+'</div><div class="waffle-charteditor-rangepicker-modification-disabled">You can\'t modify the data on this type of chart.</div><div class="waffle-charteditor-rangepicker-checkboxes-container"><div class="waffle-charteditor-rangepicker-hidden-data"></div><div class="waffle-charteditor-rangepicker-aggregate"></div><div class="waffle-charteditor-rangepicker-transpose"></div><div class="waffle-charteditor-rangepicker-hasheaders"></div><div class="waffle-charteditor-rangepicker-haslabels"></div></div></div>');
return V(a)};function KW(a,b,c,d){S.call(this,d);this.L=a;this.ma=c;this.J=new iU(b,y(this.oa,this),!1,void 0,!0,void 0,this.qa());this.Oa(this.J);this.C=new OH("\u2014",void 0,this.qa());this.Oa(this.C);this.C.Gf(new wJ("Horizontally","COLS"));this.C.Gf(new wJ("Vertically","ROWS"));this.D=new dv(void 0,void 0,!0);H(this,this.D);this.F=new HW(a.Kj("waffle-charteditor-hidden-data"),this.D,this.qa());this.Oa(this.F);this.O=new HW(a.Kj("waffle-charteditor-aggregate"),this.D,this.qa());this.Oa(this.O);this.ea=new HW(a.Kj("waffle-charteditor-transpose"),
this.D,this.qa());this.Oa(this.ea);this.R=new HW(a.Kj("waffle-charteditor-hasheaders"),this.D,this.qa());this.Oa(this.R);this.Z=new HW(a.Kj("waffle-charteditor-haslabels"),this.D,this.qa());this.Oa(this.Z)}z(KW,S);KW.prototype.va=function(){this.Da=Or(ijc)};
KW.prototype.Ja=function(){KW.$.Ja.call(this);this.J.render(this.bb("waffle-charteditor-rangepicker-input"));this.C.render(this.bb("waffle-charteditor-rangepicker-merge"));Jp(this.C.Vc().getElement(),"goog-menu-noaccel");iv(this.D,this.C,this.L.Kj("waffle-charteditor-merge-scheme"),O$b,y(function(){return this.C.Ma()},this));this.F.render(this.bb("waffle-charteditor-rangepicker-hidden-data"));this.O.render(this.bb("waffle-charteditor-rangepicker-aggregate"));this.ea.render(this.bb("waffle-charteditor-rangepicker-transpose"));
this.R.render(this.bb("waffle-charteditor-rangepicker-hasheaders"));this.Z.render(this.bb("waffle-charteditor-rangepicker-haslabels"));this.getHandler().V(this.J,"change",this.Aa)};
function jjc(a,b){Np(a.Da,"waffle-charteditor-rangepicker-data-transformation",!!Gk(b.C.eg||"","dt"));var c=kjc(b,b.D);a.J.Xa(c);var d=0<b.D.length;ac(ajc,function(a){this.L.Kj(a).Ra(d)},a);var c=b.isTransposed(),e=b.D,f=null,h=null;0<e.length&&e[0].rect&&(f=Gw(e[0].rect.eh("r")+1).toString(),h=Iw(e[0].rect.eh("c")));var k=a.bb("waffle-charteditor-rangepicker-merge");R(k,1<e.length);a.C.Xa(ljc(b));e=mjc(b);a.O.Wc(e);IW(a.O,c?null===f?"Aggregate first row":"Aggregate row "+f:null===h?"Aggregate first column":
"Aggregate column "+h);a.R.Wc(1<=njc(b));IW(a.R,c?null===h?"Use first column as headers":"Use column "+(h+" as headers"):null===f?"Use first row as headers":"Use row "+(f+" as headers"));a.Z.Wc(ojc(b));IW(a.Z,c?null===f?"Use first row as labels":"Use row "+(f+" as labels"):null===h?"Use first column as labels":"Use column "+(h+" as labels"));a.L.Kj("waffle-charteditor-haslabels").Ra(d&&!e);a.F.Wc(3==pjc(b));IW(a.F,"Include hidden / filtered data");R(a.F.Da,qjc(b));a.ea.Wc(c);IW(a.ea,"Switch rows / columns")}
KW.prototype.Aa=function(){var a=this.J.Ma();this.L.Kj("waffle-chareditor-range-change").Lb(a)};KW.prototype.oa=function(a,b,c){P9b(this.ma,null,a,b,c,!0);a=kLa(this.ma);H(this,a)};function rjc(a){a=a||{};a=""+U(hU(bs({title:ds("Chart editor"),Hk:es('<div class="waffle-charteditor-classic"><div class="waffle-charteditor-classic-button">Use the classic chart editor</div></div>'),fV:ds("waffle-charteditor-sidebar")},a)));return V(a)};function sjc(a,b,c,d){YT.call(this,d);this.O=a;this.R=c;this.L=new dv(void 0,void 0,!0);H(this,this.L);this.J=new KW(a,b,c,this.qa());a=this.D=new JW(a,this.qa());b=this.J;c=a.R.Kj("charteditor-datapicker-bundle");a.D=new GW("Data range",b,c,a.F,a.qa());a.Oa(a.D);c.setVisible(!0);c.Ra(!0);this.Oa(this.D,!0);this.F=new lt("",KI.getInstance(),this.qa());this.Oa(this.F)}z(sjc,YT);var tjc={MWa:"waffle-charteditor-classic-button"};sjc.prototype.va=function(){this.Da=Or(rjc)};
sjc.prototype.Ja=function(){sjc.$.Ja.call(this);var a=this.bb(tjc.MWa);this.F.Ya(a);iv(this.L,this.F,this.O.Kj("waffle-charteditor-use-classic"),jv)};function ujc(a,b){jjc(a.J,b);b=kjc(b,b.D);a.D.D.Tqa(b)};function vjc(a,b){F.call(this);this.F=a;this.D=b;this.J=new oo(this);H(this,this.J);this.C=null;po(po(po(this.J,this.D.Kj("charteditor-chart-title-field-change"),vo,this.O),this.D.Kj("charteditor-chart-type-change"),vo,this.R),this.D.Kj("charteditor-is3d-change"),vo,this.L)}z(vjc,F);function wjc(a,b){a.C!=b&&(a.C&&a.C.removeAllChartListeners(),a.C=b,a.C.addChartListener(y(function(a){switch(a.getEventType()){case ritz.charts.ChartEvent.CHART_UPDATED:hjc(this.F,b)}},a)));hjc(a.F,b)}
vjc.prototype.O=function(a){this.C.setTitle(a.data)};vjc.prototype.R=function(a){this.C.setType(a.data)};vjc.prototype.L=function(){this.C.setIs3D(!this.C.is3D())};function xjc(a,b){this.C=a;this.F=b;this.Le=new Gi;this.D=[]}function kjc(a,b){if(!b.length)return"";for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.rect;f&&(e=e.zd==tw(a.F)?null:vw(a.F,e.zd),c.push(Qw(f,e&&e.C)))}return c.join(",")}function yjc(a){var b=a.C.eg;b&&(b=new Bl(b),xVa(b,a.D),a.C.Fi(b.toString()))}function zjc(a,b){a.D=b;yjc(a)}function ljc(a){a=Gk(a.C.eg||"","merge");if(null===a||""==a)a="COLS";return a}function mjc(a){return null!==a.C.gc("applyAggregateData")}
function njc(a){a=Gk(a.C.eg||"","headers");return a=null!=a&&za(a)&&Ta(a)?parseInt(a,10):-1}function ojc(a){return!!a.C.gc("useFirstColumnAsDomain")}function qjc(a){return 0==a.D.length?!1:yb(a.D,function(a){var b=SC(this.F,a.zd);a=a.rect;var d=yh(a,"r"),e=yh(a,"c"),d=Zx(b,"r",d),e=Zx(b,"c",e),b=WQa(b.Fa,[yh(a,"r")]);return 0<d.length||0<e.length||1<b.length},a)}function pjc(a){a=Gk(a.C.eg||"","hds");return a=null!=a&&za(a)&&Ta(a)?parseInt(a,10):0}
xjc.prototype.isTransposed=function(){return"1"==Gk(this.C.eg||"","transpose")};function Ajc(a,b,c,d,e,f){dU.call(this,a,f);this.Z=a;this.R=b;this.ea=c;this.oa=d;this.J=e;this.ma=new vjc(a.D,e);H(this,this.ma);this.C=this.L=this.D=null;this.Aa=b.J;this.Bf().V(Wn,"show-chart-editor",this.Uzb).V(this.Aa,"yb",this.VQa);po(po(po(po(po(po(po(po(this.O,this.J.Kj("waffle-charteditor-use-classic"),vo,this.iCb),this.J.Kj("waffle-chareditor-range-change"),vo,this.AXb),this.J.Kj("waffle-charteditor-merge-scheme"),vo,this.Zsb),this.J.Kj("waffle-charteditor-aggregate"),vo,this.pib),this.J.Kj("waffle-charteditor-hasheaders"),
vo,this.Spb),this.J.Kj("waffle-charteditor-haslabels"),vo,this.Tpb),this.J.Kj("waffle-charteditor-hidden-data"),vo,this.dqb),this.J.Kj("waffle-charteditor-transpose"),vo,this.JBb)}z(Ajc,dU);q=Ajc.prototype;q.wi=function(){return Y.hua};q.Hv=function(){return Y.HWa};q.Uzb=function(a){a.OMa?Bjc(this):Cjc(this)};
function Bjc(a){var b=a.R.C.getActiveGrid(),c=b.yd(),d=c.Mk();null==d||0==d.length?Djc(a,[wC(c)]):I$b(b,d).addCallback(function(a){var b=a[0],d=ritz.newChartEditorAutovisChartRecommender(),b=ritz.calcAutovisRecommendation(d,c.Bc().toString(),b.rc(),b.Zc(),b.jc(),b.hd());null==b||0==b.length?Djc(this,a):(b=b[0],d=new cE,d.Vh(ritz_api.AutovisRecommendationApi.getChartType(b)),d.setOption("applyAggregateData",null),d.setOption("useFirstColumnAsDomain",ritz_api.AutovisRecommendationApi.useFirstColumnAsDomain(b)),
d.setOption("isStacked",ritz_api.AutovisRecommendationApi.isStacked(b)),d.setOption("treatLabelsAsText",!1),d.setOption("title",ritz_api.AutovisRecommendationApi.getChartTitle(b)),d.setOption("hAxis.title",ritz_api.AutovisRecommendationApi.getHorizontalAxisTitle(b)),d.setOption("vAxes.0.title",ritz_api.AutovisRecommendationApi.getLeftVerticalAxisTitle(b)),d.setOption("vAxes.1.title",ritz_api.AutovisRecommendationApi.getRightVerticalAxisTitle(b)),d.setOption("useFirstColumnAsDomain",ritz_api.AutovisRecommendationApi.useFirstColumnAsDomain(b)),
d.setOption("useFirstColumnAsDomain",ritz_api.AutovisRecommendationApi.useFirstColumnAsDomain(b)),Ejc(this,d,a))},a)}function Djc(a,b){var c=new cE;c.Vh("ColumnChart");Ejc(a,c,b)}
function Ejc(a,b,c){var d=a.R,e;e=FA(a.ea).ye();var f=XF(e),h;a.Z.Va()?h=.5*f.width:(h=a.Z.getElement().clientWidth,h=.5*(f.width-h));h-=.5*bA.width;f=.5*f.height-.5*bA.height;e=new N(e.hp(h,"c","waffle"),e.hp(f,"r","waffle"));c=H$b(d,c,e);O9b(c,b);a.ea.dispatchEvent(new YE("objectRequest"));b=new vG(a.R,c);a.oa.C(b);Cjc(a)}function Cjc(a){a.VQa();qm?(a.Z.focus(),eU(a)):(pLa(a.Z.R,a.D),qm=!0)}
q.VQa=function(){var a;a=yw(this.ea.D)?FA(this.ea).dj.C:PRa(this.ea).Sa().O;null!=a&&(this.D=this.R.J.getEmbeddedObject(a),this.PQa())};q.PQa=function(){if(this.D){var a=uVa(this.D);this.L=$ic(this.D);this.L.addChartListener(y(function(a){switch(a.getEventType()){case ritz.charts.ChartEvent.CHART_UPDATED:LW(this)}},this));wjc(this.ma,this.L);this.C=new xjc(a,this.R.C);zjc(this.C,$C(this.D)||[]);ujc(this.Z,this.C)}};q.iCb=function(){this.wi().setVisible(!1);qm=!1;Pqa(!1)};
q.AXb=function(a){var b=a.data;a=this.C;a=kjc(a,a.D);if(b!=a){a=this.C;for(var c=[],b=KT(b," *, *"),d=0;d<b.length;d++){var e=Va(b[d]);e.length&&(e=Ow(e,a.F,!1,!0))&&(e=new Eh(e.zd,e.Ti,Jh($$b(Hh(e.rect,e.zd)))),c.push(e))}a.D=c;yjc(a);LW(this)}};q.Zsb=function(a){a=a.data;if(a!=ljc(this.C)){var b=this.C,c=b.C.eg||"",c=Ik(c,"merge",a);b.C.Fi(c);LW(this)}};q.pib=function(){var a=!mjc(this.C);this.C.C.setOption("applyAggregateData",a?0:null);this.L.setAggregated(mjc(this.C))};
q.Spb=function(){var a=this.C,b=!(1<=njc(this.C)),c=a.C.eg||"",c=Ik(c,"headers",b?"1":"0");a.C.Fi(c);LW(this)};q.Tpb=function(){var a=!ojc(this.C);this.C.C.setOption("useFirstColumnAsDomain",a);this.L.setHasLabels(ojc(this.C))};q.dqb=function(){var a=this.C,b=3!=pjc(this.C),c=a.C.eg||"",c=Ik(c,"hds",b?3:0);a.C.Fi(c);LW(this)};q.JBb=function(){var a=this.C,b=!this.C.isTransposed(),c=a.C.eg||"",c=Ik(c,"transpose",b?"1":"0");a.C.Fi(c);LW(this)};
function LW(a){if(a.L){var b=njc(a.C);a.D.Ha=b;b=pjc(a.C);a.D.Z=b;b=a.C.isTransposed();a.D.Fa=b;b=ljc(a.C);a.D.J=b;a.D.hN(a.C.D);var b=a.C,c=Gk(b.C.eg||"","dt");(b=c?b.Le.Bd(hf.Ea(),JSON.parse(decodeURIComponent(c))):null)&&pVa(a.D,b);b=new cE(a.L.getJsonString());O9b(a.D,b);b=a.D.isSaved()?new MJ(a.R,a.D):new vG(a.R,a.D);a.oa.C(b);Xk(a.PQa,0,a)}};function Fjc(){F.call(this)}z(Fjc,Ln);
Fjc.prototype.F=function(a){EW(a,"charteditor-background-color-change").Ga(87003).enabled(!0).Ia();EW(a,"charteditor-chart-title-field-change").Ga(87005).enabled(!0).Ia();EW(a,"charteditor-chart-type-change").Ga(87E3).enabled(!0).Ia();EW(a,"charteditor-chart-updated").Ga(87004).enabled(!0).Ia();EW(a,"charteditor-color-scheme-change").Ga(87001).enabled(!0).Ia();EW(a,"charteditor-datapicker-bundle").Ga(87006).visible(!1).enabled(!1).Ia();EW(a,"charteditor-font-change").Ga(87002).enabled(!0).Ia();EW(a,
"charteditor-is3d-change").Ga(87007).enabled(!0).Ia();EW(a,"waffle-charteditor-aggregate").Ga(35371).enabled(!0).Ia();EW(a,"waffle-charteditor-hasheaders").Ga(35372).enabled(!0).Ia();EW(a,"waffle-charteditor-haslabels").Ga(35373).enabled(!0).Ia();EW(a,"waffle-charteditor-hidden-data").Ga(35374).enabled(!0).Ia();EW(a,"waffle-charteditor-merge-scheme").Ga(35375).enabled(!0).Ia();EW(a,"waffle-chareditor-range-change").Ga(35376).enabled(!0).Ia();EW(a,"waffle-charteditor-transpose").Ga(35377).enabled(!0).Ia();
EW(a,"waffle-charteditor-use-classic").Ga(35400).enabled(!0).Ia()};Fjc.prototype.D=function(){return sjc};Fjc.prototype.C=function(){return Ajc};Tn("charteditor",Fjc);
